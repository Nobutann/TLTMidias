{% extends 'base.html' %}
{% load static %}

{% block title %}Jornal do Commercio{% endblock %}

{% block content %}
<div class="container">
    {% if articles %}
    <section class="hero-section">
        <div class="hero-grid">
            {% with articles.0 as featured %}
            <article class="hero-main">
                <a href="{% url 'article:details' featured.pk %}" class="hero-link">
                    {% if featured.image %}
                    <div class="hero-image">
                        <img src="{{ featured.image.url }}" alt="{{ featured.title }}">
                        {% if featured.category %}
                        <span class="category-overlay">{{ featured.category.title }}</span>
                        {% endif %}
                    </div>
                    {% endif %}
                    <div class="hero-content">
                        <h2 class="hero-title">{{featured.title}}</h2>
                        <p class="hero-excerpt">{{ featured.content|truncatewords:35 }}</p>
                        <div class="article-meta">
                            <span class="author">{{ featured.author }}</span>
                            <span class="date">{{ featured.published_date|date:"d/m/Y H:i" }}</span>
                        </div>
                    </div>
                </a>
            </article>
            {% endwith %}

            <div class="hero-sidebar">
                {% for article in articles|slice:"1:4" %}
                <article class="hero-secondary">
                    <a href="{% url 'article:details' article.pk %}" class="hero-secondary-link">
                        {% if article.image %}
                        <div class="hero-secondary-image">
                            <img src="{{ article.image.url }}" alt="{{ article.title }}">
                        </div>
                        {% endif %}
                        <div class="hero-secondary-content">
                            {% if article.category %}
                            <span class="category-tag-small">{{ article.category.title }}</span>
                            {% endif %}
                            <h3 class="hero-secondary-title">{{ article.title }}</h3>
                            <div class="article-meta small">
                                <span class="date">{{ article.published_date|date:"d/m/Y" }}</span>
                            </div>
                        </div>
                    </a>
                </article>
                {% endfor %}
            </div>
        </div>
    </section>
    {% else %}
    <section class="hero-section">
        <div class="hero-grid">
            <article class="hero-main">
                <a href="#" class="hero-link">
                    <div class="hero-content">
                        <h2 class="hero-title">Nenhuma not√≠cia dispon√≠vel</h2>
                        <p class="hero-excerpt">Ainda n√£o h√° artigos publicados. Volte mais tarde.</p>
                    </div>
                </a>
            </article>

            <div class="hero-sidebar">
                <article class="hero-secondary">
                    <a href="#" class="hero-secondary-link">
                        <div class="hero-secondary-content">
                            <h3 class="hero-secondary-title">Sem mat√©rias</h3>
                        </div>
                    </a>
                </article>
            </div>
        </div>
    </section>
    {% endif %}

    <section class="article-section">
        <div class="section-header">
            <h2 class="section-title">√öltimas Not√≠cias</h2>
            <a href="#" class="view-all">Ver todas</a>
        </div>

        <div class="article-grid">
            {% for article in articles %}
                {% if forloop.counter > 4 %}
                <article class="article-card">
                    <a href="{% url 'article:details' article.pk %}" class="article-link">
                        {% if article.image %}
                        <div class="article-image">
                            <img src="{{ article.image.url }}" alt="{{ article.title }}">
                            {% if article.category %}
                            <span class="category-badge">{{article.category.title}}</span>
                            {% endif %}
                        </div>
                        {% else %}
                        <div class="article-image article-image-placeholder">
                            <span>üì∞</span>
                        </div>
                        {% endif %}

                        <div class="article-content">
                            <h3 class="article-title">{{ article.title }}</h3>

                            <p class="article-excerpt">{{ article.content|truncatewords:20 }}</p>

                            <div class="article-meta">
                                <span class="author">{{ article.author }}</span>
                                <span class="date">{{ article.published_date|date:"d/m/Y" }}</span>
                            </div>
                        </div>
                    </a>
                </article>
                {% endif %}
            {% empty %}
                <div class="article-placeholder-grid">
                    <article class="article-card">
                        <a href="/article/0/" class="article-link">
                            <div class="article-image article-image-placeholder">
                                <span>üì∞</span>
                            </div>
                            <div class="article-content">
                                <h3 class="article-title">Nenhuma not√≠cia dispon√≠vel</h3>
                                <p class="article-excerpt">Ainda n√£o h√° artigos publicados.</p>
                            </div>
                        </a>
                    </article>

                    <article class="article-card">
                        <a href="/article/0/" class="article-link">
                            <div class="article-image article-image-placeholder">
                                <span>üì∞</span>
                            </div>
                            <div class="article-content">
                                <h3 class="article-title">Nenhuma not√≠cia dispon√≠vel</h3>
                                <p class="article-excerpt">Volte mais tarde para ver novidades.</p>
                            </div>
                        </a>
                    </article>

                    <article class="article-card">
                        <a href="/article/0/" class="article-link">
                            <div class="article-image article-image-placeholder">
                                <span>üì∞</span>
                            </div>
                            <div class="article-content">
                                <h3 class="article-title">Nenhuma not√≠cia dispon√≠vel</h3>
                                <p class="article-excerpt">Estamos preparando conte√∫do para voc√™.</p>
                            </div>
                        </a>
                    </article>
                </div>
            {% endfor %}
        </div>
    </section>

    {% if articles.has_other_pages %}
    <div class="pagination">
        {% if articles.has_previous %}
            <a href="?page=1" class="pagination-link">Primeira</a>
            <a href="?page{{ articles.previous_page_number }}" class="pagination-link">Anterior</a>
        {% endif %}

        <span class="pagination-current">
            P√°gina {{ articles.number }} de {{ articles.paginator.num_pages }}
        </span>

        {% if articles.has_next %}
            <a href="?page{{ articles.next_page_number }}" class="pagination-link">Pr√≥xima</a>
            <a href="?page{{ articles.paginator.num_pages }}" class="pagination-link">√öltima</a>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}